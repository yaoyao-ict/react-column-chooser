!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash"),require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["lodash","react","prop-types"],t):"object"==typeof exports?exports.ReactColumnChooser=t(require("lodash"),require("react"),require("prop-types")):e.ReactColumnChooser=t(e._,e.React,e.PropTypes)}("undefined"!=typeof self?self:this,function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(4),r=(n=o)&&n.__esModule?n:{default:n};t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=f(a(0)),r=f(a(1)),l=f(a(2)),i=f(a(5)),s=f(a(7)),u=f(a(8)),c=f(a(9)),d=a(10);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:e.selected||[],activeCategory:e.categories[0].name,savedName:e.allowSaveName?e.savedName:"",isSavingName:e.allowSaveName&&o.default.isString(e.savedName)&&e.savedName.length>0},o.default.bindAll(a,["onCategorySwitch","onAdd","onRemove","onAddAll","onRemoveAll","onReorder","onSaveNameSwitch","onSave"]),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),n(t,[{key:"onCategorySwitch",value:function(e){this.setState({activeCategory:e})}},{key:"onAdd",value:function(e){var t=this.state.selected.concat(e);this.setState({selected:t})}},{key:"onRemove",value:function(e){var t=o.default.without(this.state.selected,e);this.setState({selected:t})}},{key:"onAddAll",value:function(){var e=this.getIdsInActiveList(),t=o.default.chain(this.state.selected).union(e).uniq().value();this.setState({selected:t})}},{key:"onRemoveAll",value:function(){var e=this,t=this.getIdsInActiveList(),a=o.default.chain(t).map(function(t){return(0,d.findConfigWithId)(e.props.categories,t)}).filter(function(e){return!e.selectOption||"optional"===e.selectOption}).map("id").value(),n=o.default.chain(this.state.selected).difference(a).uniq().value();this.setState({selected:n})}},{key:"onReorder",value:function(e,t){var a=this.getConfigForDraggable(),n=a.lockedItems,r=a.draggableItems,l=o.default.map(r,"id"),i=o.default.map(n,"id"),s=l;e>t?s=o.default.flattenDeep([l.slice(0,t),l[e],l.slice(t,e),l.slice(e+1)]):e<t&&(s=o.default.flattenDeep([l.slice(0,e),l.slice(e+1,t+1),l[e],l.slice(t+1)]));var u=o.default.chain(i).union(s).uniq().value();this.setState({selected:u})}},{key:"onSaveNameSwitch",value:function(){var e=this.state.isSavingName;this.setState({isSavingName:!e})}},{key:"onSave",value:function(e){var t=e.name,a=this.state.selected;this.props.onSave({name:t,selected:a})}},{key:"getConfigForDraggable",value:function(){var e=this,t=o.default.chain(this.state.selected).map(function(t){return(0,d.findConfigWithId)(e.props.categories,t)}).compact().value(),a=o.default.map(t,function(t){return o.default.defaults(t,{i18n:e.props.i18n,selectOption:"optional"})}),n=o.default.filter(a,function(e){return"locked"===e.selectOption});return{lockedItems:n,draggableItems:o.default.difference(a,n)}}},{key:"getActiveOptions",value:function(){var e=this;return o.default.chain(this.props.categories).find(function(t){return t.name===e.state.activeCategory}).get("options").value()}},{key:"getIdsInActiveList",value:function(){return o.default.map(this.getActiveOptions(),"id")}},{key:"render",value:function(){var e=this.getConfigForDraggable(),t=e.lockedItems,a=e.draggableItems;return r.default.createElement("div",{className:"column-chooser"},r.default.createElement("div",{className:"panel-heading"},r.default.createElement("div",{className:"panel-title"},this.props.i18n.getString("ColumnChooser_Header"))),r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"column-chooser-option"},r.default.createElement("div",{className:"column-chooser-option-header"},r.default.createElement("span",null,this.props.i18n.getString("ColumnChooser_AvailableColumnsHeader"))),r.default.createElement(s.default,{categories:o.default.map(this.props.categories,"name"),activeCategory:this.state.activeCategory,onClick:this.onCategorySwitch}),r.default.createElement(u.default,{options:this.getActiveOptions(),selected:this.state.selected,onAdd:this.onAdd,onAddAll:this.onAddAll,onRemoveAll:this.onRemoveAll,i18n:this.props.i18n})),r.default.createElement("div",{className:"column-chooser-selected"},r.default.createElement("div",{className:"column-chooser-selected-header"},r.default.createElement("span",null,this.props.i18n.getString("ColumnChooser_SelectedColumnsHeader"))),r.default.createElement(i.default,{lockedItems:t,draggableItems:a,onDrop:this.onReorder,onRemove:this.onRemove,i18n:this.props.i18n}))),r.default.createElement("div",{className:"panel-footer"},r.default.createElement(c.default,{allowSaveName:this.props.allowSaveName,isSavingName:this.state.isSavingName,savedName:this.state.savedName,i18n:this.props.i18n,onCheckboxClick:this.onSaveNameSwitch,onSave:this.onSave,onCancel:this.props.onCancel})))}}]),t}();p.propTypes={selected:l.default.arrayOf(l.default.string),categories:l.default.arrayOf(l.default.shape({name:l.default.string,options:l.default.arrayOf(l.default.object)})).isRequired,allowSaveName:l.default.bool,savedName:l.default.string,i18n:l.default.shape({getString:l.default.func.isRequired}).isRequired,onSave:l.default.func.isRequired,onCancel:l.default.func.isRequired},p.defaultProps={selected:[],allowSaveName:!1,savedName:""},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=s(a(1)),r=s(a(2)),l=s(a(0)),i=s(a(6));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.uniqueId=l.default.uniqueId(),l.default.bindAll(a,["onDragstart","onDragover","onDrop"]),a.state={draggableItems:e.draggableItems},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({draggableItems:e.draggableItems})}},{key:"onDragstart",value:function(e){this.indexFrom=parseInt(e.target.dataset.index,10),this.dragStartState=this.state.draggableItems}},{key:"onDragover",value:function(e){var t=e.target.closest("ul > li");if(l.default.isNumber(this.indexFrom)&&t){this.indexTo=parseInt(t.dataset.index,10);var a=this.dragStartState;this.indexFrom>this.indexTo?a=l.default.flattenDeep([a.slice(0,this.indexTo),a[this.indexFrom],a.slice(this.indexTo,this.indexFrom),a.slice(this.indexFrom+1)]):this.indexFrom<this.indexTo&&(a=l.default.flattenDeep([a.slice(0,this.indexFrom),a.slice(this.indexFrom+1,this.indexTo+1),a[this.indexFrom],a.slice(this.indexTo+1)])),this.setState({draggableItems:a})}e.preventDefault()}},{key:"onDrop",value:function(e){var t=e.target.closest("ul > li");l.default.isNumber(this.indexFrom)&&t&&this.props.onDrop(this.indexFrom,this.indexTo),delete this.indexFrom,delete this.indexTo,delete this.dragStartState}},{key:"render",value:function(){var e=this,t=l.default.map(this.props.lockedItems,function(t){var a=l.default.defaults(t,{i18n:e.props.i18n,selectOption:"optional"});return o.default.createElement("li",{key:t.id,className:"draggable-list-item draggable-list__item-locked"},o.default.createElement(i.default,{selectOption:a.selectOption,id:a.id,name:a.name}))}),a=l.default.map(this.state.draggableItems,function(t,a){var n=l.default.defaults(t,{i18n:e.props.i18n,selectOption:"optional"});return o.default.createElement("li",{draggable:"true",key:t.id,"data-index":a,onDragStart:e.onDragstart,onDragOver:e.onDragover,onDrop:e.onDrop,onDragEnd:e.onDrop,className:"draggable-list-item draggable-list__item-draggable "+(e.indexTo===a?"draggable-list__item-preview":"")},o.default.createElement(i.default,{selectOption:n.selectOption,id:n.id,name:n.name,i18n:n.i18n,onClick:e.props.onRemove}))});return o.default.createElement("div",{className:"draggable-list-view"},o.default.createElement("ul",{className:"draggable-list",id:this.uniqueId},t,a))}}]),t}();u.propTypes={onDrop:r.default.func.isRequired,onRemove:r.default.func.isRequired,lockedItems:r.default.arrayOf(r.default.object),draggableItems:r.default.arrayOf(r.default.object),i18n:r.default.shape({getString:r.default.func.isRequired}).isRequired},u.defaultProps={lockedItems:[],draggableItems:[]},t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(1)),o=r(a(2));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.selectOption,a=e.id,o=e.name,r=e.i18n,l=e.onClick;return n.default.createElement("div",null,"locked"!==t&&n.default.createElement("span",{className:"trigger-icon"}),n.default.createElement("span",null,o),"locked"!==t&&"mandatory"!==t&&n.default.createElement("span",{className:"remove","data-item-key":a},n.default.createElement("a",{className:"a11y-delete",href:"javascript:void(0);",onClick:function(){return l(a)},tabIndex:"-1",role:"button"},r.getString("ColumnChooser_Remove"))))};l.propTypes={selectOption:o.default.oneOf(["locked","mandatory","optional"]),id:o.default.string.isRequired,name:o.default.string.isRequired,i18n:o.default.shape({getString:o.default.func}),onClick:o.default.func},l.defaultProps={selectOption:"optional",i18n:null,onClick:null},t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(1)),o=l(a(2)),r=l(a(0));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.categories,a=e.activeCategory,o=e.onClick;return n.default.createElement("ul",{className:"column-chooser-categories"},r.default.map(t,function(e){return n.default.createElement("li",{className:a===e?"active":null,key:e,onClick:function(){return o(e)}},e)}))};i.propTypes={categories:o.default.arrayOf(o.default.string).isRequired,activeCategory:o.default.string.isRequired,onClick:o.default.func.isRequired},t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(1)),o=l(a(2)),r=l(a(0));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.options,a=e.selected,o=e.onAdd,l=e.onAddAll,i=e.onRemoveAll,s=e.i18n;return n.default.createElement("div",{className:"column-chooser-options"},n.default.createElement("div",{className:"column-chooser-bulk-control"},r.default.chain(t).map("id").difference(a).isEmpty().value()?n.default.createElement("div",null,n.default.createElement("a",{className:"remove-all-in-list",href:"javascript:void(0);",onClick:function(){return i()}},s.getString("ColumnChooser_RemoveAllInList")),n.default.createElement("span",{className:"arrow-button-right enabled"})):n.default.createElement("div",null,n.default.createElement("a",{className:"add-all-in-list",href:"javascript:void(0);",onClick:function(){return l()}},s.getString("ColumnChooser_AddAllInList")),n.default.createElement("span",{className:"arrow-button-left enabled"}))),n.default.createElement("ul",{className:"column-chooser-options-list"},r.default.map(t,function(e){var t=r.default.includes(a,e.id),l=void 0;return l=t?n.default.createElement("span",{className:"column-chooser-column-added"},s.getString("ColumnChooser_Added")):n.default.createElement("a",{href:"javascript:void(0);",className:"column-chooser-add-column-link",onClick:function(){return o(e.id)}},s.getString("ColumnChooser_Added")),n.default.createElement("li",{key:e.id,className:t?"column-chooser-option-selected":"column-chooser-option-not-selected"},n.default.createElement("span",null,e.name),l)})))};i.propTypes={options:o.default.arrayOf(o.default.shape({id:o.default.string,name:o.default.string})).isRequired,selected:o.default.arrayOf(o.default.string),onAdd:o.default.func.isRequired,onAddAll:o.default.func.isRequired,onRemoveAll:o.default.func.isRequired,i18n:o.default.shape({getString:o.default.func.isRequired}).isRequired},i.defaultProps={selected:[]},t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=i(a(1)),r=i(a(0)),l=i(a(2));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.checkboxId=r.default.uniqueId("save-name-"),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"column-chooser-footer"},this.props.allowSaveName&&o.default.createElement("div",{className:"column-chooser-save-name"},o.default.createElement("label",{htmlFor:this.checkboxId},o.default.createElement("input",{className:"column-chooser-save-name-checkbox",type:"checkbox",id:this.checkboxId,defaultChecked:this.props.isSavingName,onClick:function(){return e.props.onCheckboxClick()}}),this.props.i18n.getString("ColumnChooser_SaveName")),this.props.isSavingName&&o.default.createElement("input",{className:"column-chooser-saved-name",type:"text",defaultValue:this.props.savedName,ref:function(t){e.input=t}})),o.default.createElement("div",{className:"column-chooser-save-panel"},o.default.createElement("input",{type:"button",className:"btn btn-primary",onClick:function(){return e.props.onSave({name:e.input?e.input.value:""})},value:this.props.i18n.getString("ColumnChooser_Apply")}),o.default.createElement("input",{type:"button",className:"btn btn-default",onClick:function(){return e.props.onCancel()},value:this.props.i18n.getString("ColumnChooser_Cancel")})))}}]),t}();s.propTypes={allowSaveName:l.default.bool,isSavingName:l.default.bool,onCheckboxClick:l.default.func.isRequired,i18n:l.default.shape({getString:l.default.func}),savedName:l.default.string,onSave:l.default.func.isRequired,onCancel:l.default.func.isRequired},s.defaultProps={allowSaveName:!1,isSavingName:!1,i18n:{getString:r.default.identity},savedName:""},t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findConfigWithId=function(e,t){var a=null;return r.default.find(e,function(e){return a=r.default.find(e.options,function(e){return e.id===t}),!r.default.isEmpty(a)}),a};var n,o=a(0),r=(n=o)&&n.__esModule?n:{default:n}}])});